import re

# Input user text for prediction
user_input = input("masukan text: ")

# Preprocess the user input similar to the training data
user_input_features = tfidf.transform([user_input]).toarray()

# Load the trained model for prediction
loaded_model = load_model('training_model_terbaik.h5')

# Predict whether the input is AI-generated or human-written
prediction = loaded_model.predict(user_input_features)
ai_generated_percentage = prediction[0][0] * 100
human_written_percentage = (1 - prediction[0][0]) * 100

# Determine if input is AI-generated or human-written based on a threshold
threshold = 0.5
if prediction > threshold:
    input_type = "AI-generated"
else:
    input_type = "Human-written"

# Display the percentages of AI-generated and human-written text
print(f"Persentase text hasil AI: {ai_generated_percentage:.2f}%")
print(f"Persentase text buatan manusia: {human_written_percentage:.2f}%")

# Display the conclusion based on the threshold
print(f"text cenderung buatan : {input_type}")

# Predict whether the input is AI-generated or human-written
prediction = loaded_model.predict(user_input_features)
threshold = 0.5

# Find sentences with high AI-generated probability
sentences = re.split(r'(?<=[.!?]) +', user_input)  # Split input into sentences
ai_generated_sentences = []

for i, sentence in enumerate(sentences):
    sentence_features = tfidf.transform([sentence]).toarray()
    sentence_prediction = loaded_model.predict(sentence_features)
    if sentence_prediction > threshold:
        ai_generated_sentences.append(sentence)

# Display AI-generated sentences
if ai_generated_sentences:
    print("kalimat yang terindikasi buatan AI:")
    for sentence in ai_generated_sentences:
        print(f"- {sentence}")